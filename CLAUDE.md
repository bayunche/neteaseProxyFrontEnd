# CLAUDE.md

本文件为 Claude Code (claude.ai/code) 在此代码仓库中工作时提供指导。

## 项目概述

这是一个网易云音乐风格的网页音乐播放器项目。目前项目已经完成基础架构搭建，包含完整的 React + TypeScript 实现，并已接入 NetEase Music API。

## 项目架构（已实现）

基于设计文档，这是一个基于 React 的音乐播放器，具有以下架构：

### 技术栈

- **前端**: React 19 + TypeScript
- **样式**: Tailwind CSS + CSS Modules
- **状态管理**: Zustand
- **音频**: Web Audio API + HTML5 Audio
- **图标**: Lucide React
- **动画**: Framer Motion
- **构建工具**: Vite
- **路由**: React Router DOM

### 核心组件（已实现）

- **播放器模块**: 主音频播放引擎和控制
- **搜索模块**: 音乐搜索和发现
- **播放列表模块**: 播放列表管理和组织
- **UI 组件**: 可重用的界面组件
- **用户认证**: 登录和用户管理
- **歌词显示**: 歌词同步显示

### 音乐 API 集成（已实现）

项目已集成 NetEase Music API，通过代理服务器解决 CORS 问题：

- 用户认证和登录
- 音乐搜索
- 播放列表管理
- 歌词获取
- 音频播放链接

## 开发命令

```bash
npm install          # 安装依赖
npm run dev          # 启动开发服务器
npm run build        # 构建生产版本
npm run preview      # 预览生产版本
npm run lint         # 运行 ESLint
npm run proxy        # 启动代理服务器
npm run start        # 同时启动代理和开发服务器
```

## 关键设计考虑

### 布局结构

- 三栏布局：侧边栏 + 主内容区 + 播放器控制
- 响应式设计，支持桌面、平板和移动设备
- 底部播放器控制栏始终可见

### 配色方案

- 主色调: #C62D42 (网易云红)
- 背景色: #F5F5F7 (浅灰)
- 深色模式: #181818 (深灰)

### 性能优化（已实现）

- React.lazy() 路由代码分割
- 大型音乐列表的虚拟滚动
- 音频预加载和缓存策略
- Service Worker 离线支持

## 开发阶段（已完成）

### 阶段一 (MVP) ✅

1. Vite + React + TypeScript 基础项目搭建
2. 核心音频播放功能
3. 基础 UI 组件
4. NetEase Music API 集成
5. 基础播放器界面

### 阶段二 (功能扩展) ✅

1. 搜索功能
2. 播放列表管理
3. 用户收藏系统
4. 响应式设计实现
5. 性能优化
6. 歌词显示
7. 用户认证

### 阶段三 (增强功能) 🔄

1. 音频可视化
2. 主题切换
3. 离线缓存
4. PWA 支持
5. 统计页面
6. 最近播放记录

## 重要说明

- 项目已完成基础功能实现
- 已接入 NetEase Music API 并解决 CORS 问题
- 包含完整的用户认证和播放列表管理
- 支持歌词同步显示
- 专注于现代 Web 标准和响应式设计
- 计划跨浏览器兼容性和移动端优化

## 下一步实现计划

1. 完善音频可视化功能
2. 实现主题切换（深色/浅色模式）
3. 添加离线缓存支持
4. 实现 PWA 功能
5. 完善统计和数据分析页面
6. 优化移动端体验

# 重要指令提醒

只做被要求的事情，不多不少。
除非绝对必要，否则不要创建文件。
始终优先编辑现有文件而不是创建新文件。
不要主动创建文档文件 (\*.md) 或 README 文件。只有在用户明确要求时才创建文档文件。
每次进行代码修改时都需要进行一次 tsc 检测并修复，防止引入新的代码错误和不正规的代码。
每次进行代码修改时都需要进行一次 lint检查并修复，防止引入新的代码错误和不正规的代码。
每次完成任务时都需要运行一次 build检查并修复，防止引入其他运行时错误。

### 🎵 API服务状态
- **NetEase Music API服务**: 
  - 服务地址: `http://8.134.196.44:8210`
  - 文档地址: https://kevin0z0.github.io/Python_NetEaseMusicAPI/#/
  - 状态: 运行中，准备集成
- **音频/图片代理服务器**: ✅ 已部署
  - 服务地址: `http://8.134.196.44:3001`
  - 状态: 解决CORS问题，路径重写
